<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}} - Ù‡Ù…Ø©</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Modern UI Styles -->
    <link rel="stylesheet" href="/static/css/modern-ui.css">
    <link rel="stylesheet" href="/static/css/search.css">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽ¯</text></svg>">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <a href="/dashboard" class="logo">
                <img src="/static/images/logo.png" alt="Ù‡Ù…Ø©" class="logo-img">
            </a>
            
            <!-- Search Bar -->
            <div class="search-container">
                <div class="search-icon">
                    <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                </div>
                <input 
                    type="text" 
                    class="search-input" 
                    placeholder="Search... (âŒ˜K)"
                    readonly
                    onclick="globalSearch.toggle()"
                />
            </div>
            
            <!-- Navigation Links -->
            <div class="nav-links">
                <a href="/dashboard" class="nav-link" data-page="dashboard">
                    <span>Dashboard</span>
                </a>
                <a href="/projects" class="nav-link" data-page="projects">
                    <span>Projects</span>
                </a>
                <a href="/goals" class="nav-link" data-page="goals">
                    <span>Goals</span>
                </a>
                <a href="/tasks" class="nav-link" data-page="tasks">
                    <span>Tasks</span>
                </a>
                <a href="/contexts" class="nav-link" data-page="contexts">
                    <span>Contexts</span>
                </a>
                <a href="/tags" class="nav-link" data-page="tags">
                    <span>Tags</span>
                </a>
                <a href="/notes" class="nav-link" data-page="notes">
                    <span>Notes</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        {{template "content" .}}
    </main>

    <!-- Scripts -->
    <script src="/static/js/keyboard-shortcuts.js"></script>
    <script src="/static/js/global-search.js"></script>
    
    <script>
        // Initialize modern UI features
        document.addEventListener('DOMContentLoaded', function() {
            // Active navigation highlighting
            const currentPage = window.location.pathname.split('/')[1] || 'dashboard';
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                const page = link.dataset.page;
                if (page === currentPage) {
                    link.classList.add('active');
                }
            });

            // Navbar scroll effects
            const navbar = document.getElementById('navbar');
            let lastScrollY = window.scrollY;
            
            window.addEventListener('scroll', () => {
                const currentScrollY = window.scrollY;
                
                if (currentScrollY > 50) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
                
                lastScrollY = currentScrollY;
            });

            // Animate elements on page load
            const animateElements = document.querySelectorAll('.card, .list-item');
            animateElements.forEach((el, index) => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    el.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
                    el.style.opacity = '1';
                    el.style.transform = 'translateY(0)';
                }, index * 100);
            });

            // Add ripple effect to buttons
            const buttons = document.querySelectorAll('.btn');
            buttons.forEach(button => {
                button.addEventListener('click', function(e) {
                    const ripple = document.createElement('span');
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = e.clientX - rect.left - size / 2;
                    const y = e.clientY - rect.top - size / 2;
                    
                    ripple.style.cssText = `
                        position: absolute;
                        width: ${size}px;
                        height: ${size}px;
                        left: ${x}px;
                        top: ${y}px;
                        background: rgba(255, 255, 255, 0.3);
                        border-radius: 50%;
                        transform: scale(0);
                        animation: ripple 0.6s linear;
                        pointer-events: none;
                    `;
                    
                    this.style.position = 'relative';
                    this.style.overflow = 'hidden';
                    this.appendChild(ripple);
                    
                    setTimeout(() => {
                        if (ripple.parentNode) {
                            ripple.parentNode.removeChild(ripple);
                        }
                    }, 600);
                });
            });

            // Add floating particle effects
            createFloatingParticles();
        });

        // CSS for ripple animation
        const rippleCSS = `
            @keyframes ripple {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }
        `;
        const style = document.createElement('style');
        style.textContent = rippleCSS;
        document.head.appendChild(style);

        // Floating particles background effect
        function createFloatingParticles() {
            const particleContainer = document.createElement('div');
            particleContainer.className = 'floating-particles';
            particleContainer.innerHTML = `
                <style>
                    .floating-particles {
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        pointer-events: none;
                        z-index: -1;
                        overflow: hidden;
                    }
                    .particle {
                        position: absolute;
                        background: rgba(255, 255, 255, 0.1);
                        border-radius: 50%;
                        animation: float linear infinite;
                    }
                    @keyframes float {
                        0% {
                            transform: translateY(100vh) rotate(0deg);
                            opacity: 0;
                        }
                        10% {
                            opacity: 1;
                        }
                        90% {
                            opacity: 1;
                        }
                        100% {
                            transform: translateY(-10vh) rotate(360deg);
                            opacity: 0;
                        }
                    }
                </style>
            `;
            document.body.appendChild(particleContainer);

            // Create particles
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    const size = Math.random() * 6 + 2;
                    particle.style.width = size + 'px';
                    particle.style.height = size + 'px';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDuration = (Math.random() * 20 + 10) + 's';
                    particle.style.animationDelay = Math.random() * 2 + 's';
                    particleContainer.appendChild(particle);
                    
                    // Remove particle after animation
                    setTimeout(() => {
                        if (particle.parentNode) {
                            particle.parentNode.removeChild(particle);
                        }
                    }, 30000);
                }, i * 1000);
            }

            // Continuously create new particles
            setInterval(() => {
                if (document.querySelectorAll('.particle').length < 15) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    const size = Math.random() * 6 + 2;
                    particle.style.width = size + 'px';
                    particle.style.height = size + 'px';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDuration = (Math.random() * 20 + 10) + 's';
                    particleContainer.appendChild(particle);
                    
                    setTimeout(() => {
                        if (particle.parentNode) {
                            particle.parentNode.removeChild(particle);
                        }
                    }, 30000);
                }
            }, 2000);
        }
    </script>
</body>
</html>